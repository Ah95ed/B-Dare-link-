# ๐ ูุธุงู ุงูุตูุงุญูุงุช ูุงูุฅุนุฏุงุฏุงุช - Manager Permissions System

## ๐ ูุธุฑุฉ ุนุงูุฉ - Overview

ุชู ุฅุถุงูุฉ ูุธุงู ุดุงูู ููุตูุงุญูุงุช ูููุฒ ุจูู:
- **๐ ุงููุฏูุฑ (Manager):** ููุดุฆ ุงูุบุฑูุฉ - ุตูุงุญูุงุช ูุงููุฉ
- **๐ง ุงููุฏูุฑ ุงููุณุงุนุฏ (Co-Manager):** ุตูุงุญูุงุช ุฅุฏุงุฑูุฉ ูุญุฏูุฏุฉ
- **๐ฎ ุงููุงุนุจ (Player):** ุตูุงุญูุงุช ุฃุณุงุณูุฉ ููุท

---

## ๐ฏ ุงูุตูุงุญูุงุช ุญุณุจ ุงูุฏูุฑ

### ๐ ุงููุฏูุฑ ุงูุฑุฆูุณู (Manager)
**ุตูุงุญูุงุช ุญุตุฑูุฉ:**
- โ ุทุฑุฏ ุงููุงุนุจูู ูู ุงูุบุฑูุฉ
- โ ุชุฌููุฏ/ุฅูุบุงุก ุชุฌููุฏ ุงููุงุนุจูู
- โ ุฅุนุงุฏุฉ ุชุนููู ุฌููุน ุงูููุงุท
- โ ุชุฎุทู ุงูุณุคุงู ุงูุญุงูู
- โ ุชุบููุฑ ุตุนูุจุฉ ุงูุฃุณุฆูุฉ ุฃุซูุงุก ุงููุนุจุฉ
- โ ููู ุตูุงุญูุฉ ุงููุฏูุฑ ูุดุฎุต ุขุฎุฑ
- โ ุชุฑููุฉ ูุงุนุจูู ุฅูู ูุฏูุฑูู ูุณุงุนุฏูู
- โ ุชุนุฏูู ุฅุนุฏุงุฏุงุช ุงูุบุฑูุฉ ุงููุชูุฏูุฉ
- โ ุฑุคูุฉ ุณุฌู ุชุตุฑูุงุช ุงููุฏูุฑูู
- โ ุฑุคูุฉ ุงูุฅุญุตุงุฆูุงุช ุงูุชูุตูููุฉ ููู ูุงุนุจ
- โ ุญุฐู ุงูุบุฑูุฉ
- โ ุฅุนุงุฏุฉ ูุชุญ ุงูุบุฑูุฉ
- โ ุจุฏุก ุงููุนุจุฉ ูุฏููุงู

### ๐ง ุงููุฏูุฑ ุงููุณุงุนุฏ (Co-Manager)
**ุตูุงุญูุงุช ูุญุฏูุฏุฉ:**
- โ ุชุฌููุฏ/ุฅูุบุงุก ุชุฌููุฏ ุงููุงุนุจูู (ุญุณุจ ุงูุฅุนุฏุงุฏุงุช)
- โ ุชุฎุทู ุงูุณุคุงู (ุญุณุจ ุงูุฅุนุฏุงุฏุงุช)
- โ ุชุบููุฑ ุงูุตุนูุจุฉ (ุญุณุจ ุงูุฅุนุฏุงุฏุงุช)
- โ ุฑุคูุฉ ุณุฌู ุงูุชุตุฑูุงุช
- โ ุฑุคูุฉ ุงูุฅุญุตุงุฆูุงุช ุงูุชูุตูููุฉ
- โ **ูุง ูุณุชุทูุน:** ุทุฑุฏ ุงููุงุนุจูู
- โ **ูุง ูุณุชุทูุน:** ุฅุนุงุฏุฉ ุชุนููู ุงูููุงุท
- โ **ูุง ูุณุชุทูุน:** ููู ุตูุงุญูุฉ ุงููุฏูุฑ
- โ **ูุง ูุณุชุทูุน:** ุญุฐู ุงูุบุฑูุฉ

### ๐ฎ ุงููุงุนุจ ุงูุนุงุฏู (Player)
**ุตูุงุญูุงุช ุฃุณุงุณูุฉ:**
- โ ุงูุฅุฌุงุจุฉ ุนูู ุงูุฃุณุฆูุฉ
- โ ุทูุจ ูุณุงุนุฏุฉ (hints) ุฅุฐุง ูุงูุช ููุนููุฉ
- โ ุงูุฅุจูุงุบ ุนู ุฃุณุฆูุฉ ุณูุฆุฉ
- โ ุฑุคูุฉ ุงูุชุฑุชูุจ ุงูุญู (ุฅุฐุง ูุงู ููุนููุงู)
- โ ุฑุคูุฉ ุฅุญุตุงุฆูุงุชู ุงูุฎุงุตุฉ
- โ ูุบุงุฏุฑุฉ ุงูุบุฑูุฉ
- โ **ูุง ูุณุชุทูุน:** ุฃู ุตูุงุญูุงุช ุฅุฏุงุฑูุฉ

---

## โ๏ธ ุงูุฅุนุฏุงุฏุงุช ุงูุฌุฏูุฏุฉ - New Settings

### ุฅุนุฏุงุฏุงุช ุตูุงุญูุงุช ุงููุฏูุฑ
```json
{
  "manager_can_skip_puzzle": true,           // ุงููุฏูุฑ ูุณุชุทูุน ุชุฎุทู ุงูุฃุณุฆูุฉ
  "manager_can_reset_scores": true,          // ุงููุฏูุฑ ูุณุชุทูุน ุฅุนุงุฏุฉ ุชุนููู ุงูููุงุท
  "manager_can_freeze_players": true,        // ุงููุฏูุฑ ูุณุชุทูุน ุชุฌููุฏ ุงููุงุนุจูู
  "manager_can_kick_players": true,          // ุงููุฏูุฑ ูุณุชุทูุน ุทุฑุฏ ุงููุงุนุจูู
  "manager_can_change_difficulty": true,     // ุงููุฏูุฑ ูุณุชุทูุน ุชุบููุฑ ุงูุตุนูุจุฉ
  "allow_co_managers": true,                 // ุงูุณูุงุญ ุจูุฏูุฑูู ูุณุงุนุฏูู
  "show_detailed_stats_to_all": false        // ุฅุธูุงุฑ ุงูุฅุญุตุงุฆูุงุช ุงูุชูุตูููุฉ ููุฌููุน
}
```

### ุงูุฅุนุฏุงุฏุงุช ุงูููุฌูุฏุฉ ุณุงุจูุงู
```json
{
  "hints_enabled": true,                     // ุชูุนูู ุงููุณุงุนุฏุงุช
  "hints_per_player": 3,                     // ุนุฏุฏ ุงููุณุงุนุฏุงุช ููู ูุงุนุจ
  "hint_penalty_percent": 10,                // ูุณุจุฉ ุฎุตู ุงูููุงุท ุนูุฏ ุงุณุชุฎุฏุงู ูุณุงุนุฏุฉ
  "allow_report_bad_puzzle": true,           // ุงูุณูุงุญ ุจุงูุฅุจูุงุบ ุนู ุฃุณุฆูุฉ ุณูุฆุฉ
  "auto_advance_seconds": 2,                 // ุงูุงูุชูุงู ุงูุชููุงุฆู ููุณุคุงู ุงูุชุงูู
  "shuffle_options": true,                   // ุฎูุท ุงูุฎูุงุฑุงุช
  "show_rankings_live": true,                // ุฅุธูุงุฑ ุงูุชุฑุชูุจ ุงูุญู
  "allow_skip_puzzle": false,                // ุงูุณูุงุญ ุจุชุฎุทู ุงูุฃุณุฆูุฉ (ููุฌููุน)
  "min_time_per_puzzle": 5                   // ุงูุญุฏ ุงูุฃุฏูู ูู ุงูููุช ููู ุณุคุงู
}
```

---

## ๐ API Endpoints ุงูุฌุฏูุฏุฉ

### 1๏ธโฃ ุทุฑุฏ ูุงุนุจ (Manager Only)
**Endpoint:** `POST /manager/kick`

**Request:**
```json
{
  "roomId": 123,
  "userId": 456,        // ุงููุฏูุฑ
  "targetUserId": 789   // ุงููุงุนุจ ุงููุฑุงุฏ ุทุฑุฏู
}
```

**Response:**
```json
{
  "success": true,
  "message": "Player kicked"
}
```

---

### 2๏ธโฃ ุชุฌููุฏ/ุฅูุบุงุก ุชุฌููุฏ ูุงุนุจ
**Endpoint:** `POST /manager/freeze`

**Request:**
```json
{
  "roomId": 123,
  "userId": 456,
  "targetUserId": 789,
  "freeze": true        // true = ุชุฌููุฏ, false = ุฅูุบุงุก ุชุฌููุฏ
}
```

**Response:**
```json
{
  "success": true,
  "message": "Player frozen"
}
```

**ููุงุญุธุฉ:** ุงููุงุนุจ ุงููุฌูุฏ ูุง ูุณุชุทูุน ุฅุฑุณุงู ุฅุฌุงุจุงุช (ูุธูุฑ ูู ุฎุทุฃ 403).

---

### 3๏ธโฃ ุฅุนุงุฏุฉ ุชุนููู ุฌููุน ุงูููุงุท (Main Manager Only)
**Endpoint:** `POST /manager/reset-scores`

**Request:**
```json
{
  "roomId": 123,
  "userId": 456
}
```

**Response:**
```json
{
  "success": true,
  "message": "All scores reset"
}
```

**ุงููุชูุฌุฉ:** ูู ุงููุงุนุจูู ูู ุงูุบุฑูุฉ ูุนูุฏูู ุฅูู 0 ููุทุฉ ู 0 ุฃุณุฆูุฉ ูุญูููุฉ.

---

### 4๏ธโฃ ุชุฎุทู ุงูุณุคุงู ุงูุญุงูู
**Endpoint:** `POST /manager/skip-puzzle`

**Request:**
```json
{
  "roomId": 123,
  "userId": 456
}
```

**Response:**
```json
{
  "success": true,
  "message": "Puzzle skipped",
  "newIndex": 3
}
```

**ุงููุชูุฌุฉ:** ุงูุงูุชูุงู ููุณุคุงู ุงูุชุงูู ูุจุงุดุฑุฉ ุฏูู ุฅุฌุงุจุงุช.

---

### 5๏ธโฃ ุชุบููุฑ ุงูุตุนูุจุฉ ุฃุซูุงุก ุงููุนุจุฉ
**Endpoint:** `POST /manager/change-difficulty`

**Request:**
```json
{
  "roomId": 123,
  "userId": 456,
  "newDifficulty": 5    // 1-10
}
```

**Response:**
```json
{
  "success": true,
  "message": "Difficulty updated",
  "newDifficulty": 5
}
```

**ุงููุชูุฌุฉ:** ุงูุฃุณุฆูุฉ ุงููุงุฏูุฉ ุณุชููู ุจุงูุตุนูุจุฉ ุงูุฌุฏูุฏุฉ.

---

### 6๏ธโฃ ููู ุตูุงุญูุฉ ุงููุฏูุฑ (Main Manager Only)
**Endpoint:** `POST /manager/transfer`

**Request:**
```json
{
  "roomId": 123,
  "userId": 456,           // ุงููุฏูุฑ ุงูุญุงูู
  "newManagerUserId": 789  // ุงููุฏูุฑ ุงูุฌุฏูุฏ
}
```

**Response:**
```json
{
  "success": true,
  "message": "Manager role transferred"
}
```

**ุงููุชูุฌุฉ:**
- ุงููุฏูุฑ ุงููุฏูู ูุตุจุญ co_manager
- ุงููุฏูุฑ ุงูุฌุฏูุฏ ูุตุจุญ manager
- ุชุญุฏูุซ created_by ูู ุฌุฏูู rooms

---

### 7๏ธโฃ ุชุฑููุฉ ูุงุนุจ ุฅูู ูุฏูุฑ ูุณุงุนุฏ (Main Manager Only)
**Endpoint:** `POST /manager/promote`

**Request:**
```json
{
  "roomId": 123,
  "userId": 456,        // ุงููุฏูุฑ
  "targetUserId": 789   // ุงููุงุนุจ ุงููุฑุงุฏ ุชุฑููุชู
}
```

**Response:**
```json
{
  "success": true,
  "message": "Player promoted to co-manager"
}
```

**ุดุฑุท:** `allow_co_managers` ูุฌุจ ุฃู ูููู `true` ูู ุงูุฅุนุฏุงุฏุงุช.

---

### 8๏ธโฃ ุฑุคูุฉ ุณุฌู ุชุตุฑูุงุช ุงููุฏูุฑูู
**Endpoint:** `GET /manager/logs?roomId=123&userId=456`

**Response:**
```json
{
  "success": true,
  "logs": [
    {
      "id": 1,
      "room_id": 123,
      "manager_user_id": 456,
      "manager_name": "ุฃุญูุฏ",
      "action_type": "kick",
      "target_user_id": 789,
      "target_name": "ูุญูุฏ",
      "details": null,
      "created_at": "2026-01-10T10:30:00Z"
    },
    {
      "id": 2,
      "room_id": 123,
      "manager_user_id": 456,
      "manager_name": "ุฃุญูุฏ",
      "action_type": "change_difficulty",
      "target_user_id": null,
      "target_name": null,
      "details": "{\"new_difficulty\": 7}",
      "created_at": "2026-01-10T10:35:00Z"
    }
  ]
}
```

**ุตูุงุญูุฉ:** ููุท ุงููุฏูุฑูู (manager ู co_manager) ูููููู ุฑุคูุฉ ุงูุณุฌู.

---

### 9๏ธโฃ ุฑุคูุฉ ุงูุฅุญุตุงุฆูุงุช ุงูุชูุตูููุฉ
**Endpoint:** `GET /manager/detailed-stats?roomId=123&userId=456`

**Response:**
```json
{
  "success": true,
  "stats": [
    {
      "id": 1,
      "room_id": 123,
      "user_id": 789,
      "username": "ูุญูุฏ",
      "email": "mohamed@example.com",
      "score": 250,
      "puzzles_solved": 5,
      "is_ready": true,
      "role": "player",
      "is_frozen": false,
      "hints_used": 2,
      "hints_available": 1,
      "total_attempts": 8,
      "correct_answers": 5,
      "avg_time": 12500
    }
  ]
}
```

**ุตูุงุญูุฉ:**
- ุฅุฐุง `show_detailed_stats_to_all = true`: ุงูุฌููุน ูุณุชุทูุน ุฑุคูุชูุง
- ุฅุฐุง `show_detailed_stats_to_all = false`: ููุท ุงููุฏูุฑูู

---

## ๐๏ธ ุงูุชุบููุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู `room_participants` (ูุญุฏูุซ)
```sql
CREATE TABLE room_participants (
  ...
  role TEXT DEFAULT 'player',        -- ุฌุฏูุฏ: 'manager', 'co_manager', 'player'
  is_frozen BOOLEAN DEFAULT FALSE,   -- ุฌุฏูุฏ: ุงููุฏูุฑ ูุณุชุทูุน ุชุฌููุฏ ุงููุงุนุจ
  is_kicked BOOLEAN DEFAULT FALSE,   -- ุฌุฏูุฏ: ุงููุฏูุฑ ุทุฑุฏ ุงููุงุนุจ
  ...
);
```

### ุฌุฏูู `room_settings` (ูุญุฏูุซ)
```sql
CREATE TABLE room_settings (
  ...
  -- ุฅุนุฏุงุฏุงุช ุตูุงุญูุงุช ุงููุฏูุฑ (ุฌุฏูุฏุฉ)
  manager_can_skip_puzzle BOOLEAN DEFAULT TRUE,
  manager_can_reset_scores BOOLEAN DEFAULT TRUE,
  manager_can_freeze_players BOOLEAN DEFAULT TRUE,
  manager_can_kick_players BOOLEAN DEFAULT TRUE,
  manager_can_change_difficulty BOOLEAN DEFAULT TRUE,
  allow_co_managers BOOLEAN DEFAULT TRUE,
  show_detailed_stats_to_all BOOLEAN DEFAULT FALSE,
  ...
);
```

### ุฌุฏูู `manager_actions` (ุฌุฏูุฏ)
```sql
CREATE TABLE manager_actions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  room_id INTEGER NOT NULL,
  manager_user_id INTEGER NOT NULL,
  action_type TEXT NOT NULL,         -- 'kick', 'freeze', 'unfreeze', etc.
  target_user_id INTEGER,            -- ุฅุฐุง ูุงู ุงูุฅุฌุฑุงุก ูุณุชูุฏู ูุงุนุจ ูุนูู
  details TEXT,                      -- JSON ูุน ุชูุงุตูู ุฅุถุงููุฉ
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  ...
);
```

**ุงููุฏู:** ุดูุงููุฉ ูุงููุฉ - ูู ุฅุฌุฑุงุก ูุฏูุฑ ููุณุฌูู ููููู ูุฑุงุฌุนุชู.

---

## ๐ฑ ุงูุชูุงูู ูุน Frontend

### 1. ุงูุชุญูู ูู ุฏูุฑ ุงููุณุชุฎุฏู
```dart
// ูู competition_provider.dart
Future<String?> getUserRole(int roomId, int userId) async {
  final participants = await getRoomStatus(roomId);
  final me = participants.firstWhere((p) => p.userId == userId);
  return me.role; // 'manager', 'co_manager', ุฃู 'player'
}

bool isManager(String? role) {
  return role == 'manager' || role == 'co_manager';
}

bool isMainManager(String? role) {
  return role == 'manager';
}
```

### 2. ุฅุธูุงุฑ ุฃุฒุฑุงุฑ ุงููุฏูุฑ ููุท
```dart
// ูู room_game_view.dart
Widget _buildManagerActions() {
  if (!isManager(_currentUserRole)) {
    return SizedBox.shrink(); // ูุง ุดูุก ููุงุนุจูู ุงูุนุงุฏููู
  }

  return Row(
    children: [
      if (isMainManager(_currentUserRole)) ...[
        IconButton(
          icon: Icon(Icons.refresh),
          onPressed: _resetScores,
          tooltip: 'ุฅุนุงุฏุฉ ุชุนููู ุงูููุงุท',
        ),
      ],
      IconButton(
        icon: Icon(Icons.skip_next),
        onPressed: _skipPuzzle,
        tooltip: 'ุชุฎุทู ุงูุณุคุงู',
      ),
      IconButton(
        icon: Icon(Icons.tune),
        onPressed: _changeDifficulty,
        tooltip: 'ุชุบููุฑ ุงูุตุนูุจุฉ',
      ),
    ],
  );
}
```

### 3. ุนุฑุถ ูุงุฆูุฉ ุงููุงุนุจูู ูุน ุฎูุงุฑุงุช ุงููุฏูุฑ
```dart
Widget _buildPlayerTile(Participant player) {
  return ListTile(
    leading: CircleAvatar(child: Text(player.username[0])),
    title: Text(player.username),
    subtitle: Text('ุงูููุงุท: ${player.score}'),
    trailing: isManager(_currentUserRole) 
      ? PopupMenuButton(
          itemBuilder: (context) => [
            if (player.role == 'player') ...[
              PopupMenuItem(
                child: Text('ุชุฌููุฏ'),
                value: 'freeze',
              ),
              PopupMenuItem(
                child: Text('ุชุฑููุฉ ููุฏูุฑ ูุณุงุนุฏ'),
                value: 'promote',
              ),
            ],
            if (isMainManager(_currentUserRole)) ...[
              PopupMenuItem(
                child: Text('ุทุฑุฏ'),
                value: 'kick',
              ),
              if (player.role == 'player')
                PopupMenuItem(
                  child: Text('ููู ุตูุงุญูุฉ ุงููุฏูุฑ'),
                  value: 'transfer',
                ),
            ],
          ],
          onSelected: (value) => _handlePlayerAction(value, player),
        )
      : null,
  );
}
```

### 4. ูุนุงูุฌุฉ ุชุฌููุฏ ุงููุงุนุจ
```dart
// ูู competition_provider.dart
Future<void> freezePlayer(int roomId, int userId, int targetUserId, bool freeze) async {
  final response = await _competitionService.freezePlayer(
    roomId: roomId,
    userId: userId,
    targetUserId: targetUserId,
    freeze: freeze,
  );
  
  if (response['success']) {
    // ุชุญุฏูุซ ุงูุญุงูุฉ ุงููุญููุฉ
    notifyListeners();
  }
}
```

### 5. ุฅุธูุงุฑ ุฑุณุงูุฉ ููุงุนุจ ุงููุฌูุฏ
```dart
// ูู submitAnswer
try {
  await provider.submitAnswer(...);
} catch (e) {
  if (e.toString().contains('frozen')) {
    showDialog(
      context: context,
      builder: (ctx) => AlertDialog(
        title: Text('โ๏ธ ูุฌูุฏ'),
        content: Text('ุงููุฏูุฑ ูุงู ุจุชุฌููุฏู ูุคูุชุงู'),
        actions: [
          TextButton(
            child: Text('ุญุณูุงู'),
            onPressed: () => Navigator.pop(ctx),
          ),
        ],
      ),
    );
  }
}
```

---

## ๐จ ุชุตููู ูุงุฌูุฉ ุงููุฏูุฑ (UI Design)

### ููุญุฉ ุชุญูู ุงููุฏูุฑ
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ ููุญุฉ ุชุญูู ุงููุฏูุฑ                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โ๏ธ ุงูุฅุนุฏุงุฏุงุช                       โ
โ  ๐ฅ ุฅุฏุงุฑุฉ ุงููุงุนุจูู (5)              โ
โ  ๐ ุงูุฅุญุตุงุฆูุงุช ุงูุชูุตูููุฉ            โ
โ  ๐ ุณุฌู ุงูุชุตุฑูุงุช                    โ
โ  ๐ ููู ุงูุตูุงุญูุฉ                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ูุงุฆูุฉ ุงููุงุนุจูู (ูููุฏูุฑ)
```
ูุญูุฏ                 [250 ููุทุฉ]  ๐ฎ ูุงุนุจ
  โฎ [ุชุฌููุฏ | ุชุฑููุฉ | ุทุฑุฏ]

ุฃุญูุฏ                 [180 ููุทุฉ]  ๐ง ูุฏูุฑ ูุณุงุนุฏ
  โฎ [ุชุฌููุฏ | ุชุฎููุถ ุฑุชุจุฉ]

ูุงุทูุฉ                [150 ููุทุฉ]  ๐ฎ ูุงุนุจ
  โฎ [ุชุฌููุฏ | ุชุฑููุฉ | ุทุฑุฏ]
```

### ุฃุฒุฑุงุฑ ุณุฑูุนุฉ (ุฃุณูู ุงูุดุงุดุฉ)
```
โโโโโโโโโโโโฌโโโโโโโโโโโฌโโโโโโโโโโโฌโโโโโโโโโโโ
โ ุชุฎุทู     โ ุตุนูุจุฉ    โ ุฅุนุงุฏุฉ    โ ุณุฌู      โ
โ ุงูุณุคุงู   โ +/-      โ ุงูููุงุท   โ ุงูุฃุญุฏุงุซ  โ
โโโโโโโโโโโโดโโโโโโโโโโโดโโโโโโโโโโโดโโโโโโโโโโโ
```

---

## ๐ ุงูุฃูุงู ูุงูุชุญูู - Security

### Middleware ููุชุญูู ูู ุงูุตูุงุญูุงุช
```javascript
// ูู ูู endpoint ูููุฏูุฑ
const manager = await isManager(env, roomId, userId);
if (!manager) {
  return new Response(JSON.stringify({ 
    error: 'Only managers can perform this action' 
  }), { status: 403 });
}
```

### ููุน ุงูุฅุณุงุกุฉ
1. **ูุง ูููู ูููุฏูุฑ ุทุฑุฏ ููุณู**
2. **ูุง ูููู ุชุฌููุฏ ุงููุฏูุฑ ุงูุฑุฆูุณู**
3. **Co-managers ูุง ูุณุชุทูุนูู ุทุฑุฏ ุฃุญุฏ**
4. **ูู ุฅุฌุฑุงุก ููุณุฌูู ูู manager_actions**
5. **ุงูุชุญูู ูู ุงูุฅุนุฏุงุฏุงุช ูุจู ุชูููุฐ ูู ุฅุฌุฑุงุก**

---

## ๐ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู - Use Cases

### ุณููุงุฑูู 1: ูุงุนุจ ูุชุตุฑู ุจุดูู ุณูุก
```
1. ุงููุฏูุฑ ูุฑู ุณููู ุบูุฑ ูุงุฆู
2. ุงููุฏูุฑ ูุฌูุฏ ุงููุงุนุจ (freeze) ูุคูุชุงู
3. ุงููุงุนุจ ูุง ูุณุชุทูุน ุฅุฑุณุงู ุฅุฌุงุจุงุช
4. ุงููุฏูุฑ ูุญุฐุฑ ุงููุงุนุจ
5. ุฅุฐุง ุงุณุชูุฑ: ุงููุฏูุฑ ูุทุฑุฏ ุงููุงุนุจ (kick)
6. ูู ุงูุฅุฌุฑุงุกุงุช ุชูุณุฌูู ูู ุงูุณุฌู
```

### ุณููุงุฑูู 2: ุชุบููุฑ ุงูุตุนูุจุฉ ุฃุซูุงุก ุงููุนุจ
```
1. ุงููุฏูุฑ ููุงุญุธ ุฃู ุงูุฃุณุฆูุฉ ุณููุฉ ุฌุฏุงู
2. ุงููุฏูุฑ ููุชุญ ูุงุฆูุฉ ุงูุฅุนุฏุงุฏุงุช
3. ูุถุบุท ุนูู "ุชุบููุฑ ุงูุตุนูุจุฉ"
4. ูุฎุชุงุฑ ุตุนูุจุฉ 8 ุจุฏูุงู ูู 3
5. ุงูุฃุณุฆูุฉ ุงููุงุฏูุฉ ุชููู ุฃุตุนุจ
6. ุงูุฅุฌุฑุงุก ููุณุฌูู ูู ุงูุณุฌู
```

### ุณููุงุฑูู 3: ููู ุงูุตูุงุญูุฉ
```
1. ุงููุฏูุฑ ุงูุญุงูู ูุฑูุฏ ุงูุงูุณุญุงุจ
2. ูุฎุชุงุฑ ูุงุนุจ ููุซูู
3. ูุถุบุท "ููู ุตูุงุญูุฉ ุงููุฏูุฑ"
4. ุงููุงุนุจ ุงูุฌุฏูุฏ ูุตุจุญ ูุฏูุฑ
5. ุงููุฏูุฑ ุงููุฏูู ูุตุจุญ ูุฏูุฑ ูุณุงุนุฏ
6. ุงูุฅุฌุฑุงุก ููุณุฌูู
```

---

## โ ูุงุฆูุฉ ุงูุชุญูู - Checklist

### Backend โ
- [x] ุชุญุฏูุซ schema.sql
- [x] ุฅูุดุงุก manager_permissions.js
- [x] ุฅุถุงูุฉ routes ูู index.js
- [x] ุชุญุฏูุซ competitions.js ูุฅุถุงูุฉ role
- [x] ุฅุถุงูุฉ ูุญุต is_frozen ูู submitAnswer
- [x] ูุธุงู ุชุณุฌูู ุงูุฅุฌุฑุงุกุงุช (manager_actions)

### Frontend (ุงููุงุฏู)
- [ ] ุฅุถุงูุฉ CompetitionService methods ููู API ุงูุฌุฏูุฏุฉ
- [ ] ุชุญุฏูุซ CompetitionProvider
- [ ] ุฅูุดุงุก ManagerControlPanel view
- [ ] ุฅุถุงูุฉ ุฃุฒุฑุงุฑ ุงููุฏูุฑ ูู room_game_view
- [ ] ุฅุถุงูุฉ ูุงุฆูุฉ popup ููุงุนุจูู
- [ ] ุฅุธูุงุฑ ุฑุณุงูุฉ ููุงุนุจ ุงููุฌูุฏ
- [ ] ุฅุธูุงุฑ badge ููุฏูุฑ (manager/co_manager/player)

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ุงุฎุชุจุงุฑ Backend:**
   ```bash
   cd backend
   wrangler dev
   ```

2. **ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
   ```bash
   # ุชุทุจูู schema ุงูุฌุฏูุฏ
   wrangler d1 execute DB --file=schema.sql
   ```

3. **ุงุฎุชุจุงุฑ API:**
   ```bash
   # ุฅูุดุงุก ุบุฑูุฉ (ุงูููุดุฆ ูุตุจุญ manager)
   POST /competitions/rooms
   
   # ุทุฑุฏ ูุงุนุจ
   POST /manager/kick
   ```

4. **ุชุทููุฑ Frontend:**
   - ุฅุถุงูุฉ UI ูููุฏูุฑูู
   - ุชุญุฏูุซ Models
   - ุงุฎุชุจุงุฑ ุงูููุฒุงุช

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ:** ${new Date().toISOString()}
**ุงูุฅุตุฏุงุฑ:** 3.0 - Manager Permissions System
**ุงูุญุงูุฉ:** โ Backend ุฌุงูุฒ - Frontend ูุงุฏู
